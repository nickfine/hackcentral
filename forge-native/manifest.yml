app:
  id: ari:cloud:ecosystem::app/f828e0d4-e9d0-451d-b818-533bc3e95680
  runtime:
    name: nodejs22.x

modules:
  confluence:globalPage:
    - key: hackday-central-global-page
      title: HackCentral
      route: hackday-central
      resource: custom-ui-frontend
      resolver:
        function: app-resolver
  macro:
    - key: hackday-central-macro
      title: HackDay Central
      resource: custom-ui-macro
      resolver:
        function: app-resolver

  function:
    - key: app-resolver
      handler: index.handler

resources:
  - key: custom-ui-frontend
    path: static/frontend/dist
  - key: custom-ui-macro
    path: static/macro-frontend/dist

permissions:
  scopes:
    - read:page:confluence
    - write:page:confluence
    - delete:page:confluence
    - read:content.property:confluence
    - write:content.property:confluence
    - read:email-address:confluence
  external:
    fetch:
      backend:
        - '*.supabase.co'
        - '*.convex.cloud'
        - '*.atlassian.net'

environment:
  variables:
    - SUPABASE_URL
    - SUPABASE_SERVICE_ROLE_KEY
    - SUPABASE_SCHEMA
    - FORGE_DATA_BACKEND
    - CONVEX_URL
    - CONVEX_FORGE_QUERY
    - CONVEX_FORGE_CREATE_HACK
    - CONVEX_FORGE_CREATE_PROJECT
    - CONVEX_FORGE_UPDATE_MENTOR
    - FORGE_APP_ID
    - FORGE_MACRO_KEY
